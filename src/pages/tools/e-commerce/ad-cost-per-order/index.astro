---
import BaseLayout from "../../../components/layout/BaseLayout.astro";
---

<BaseLayout
  title="Ad Cost per Order Calculator — Free & Instant"
  description="Calculate the maximum ad cost per order you can afford while still hitting your target profit margin."
>
  <main class="calc_wrap">
    <!-- Header -->
    <header class="calc_header">
      <h1>Ad Cost per Order Calculator</h1>
      <p>
        Calculate the maximum ad spend per order you can afford
        while still keeping your target profit margin.
      </p>
    </header>

    <!-- Calculator -->
    <section class="calc_card">
      <div class="calc_grid">
        <!-- Inputs -->
        <div class="calc_inputs">
          <label>
            Selling Price (USD)
            <input type="number" id="price" placeholder="e.g. 50" />
          </label>

          <label>
            Product Cost (COGS)
            <input type="number" id="cost" placeholder="e.g. 15" />
          </label>

          <label>
            Platform Fee (%)
            <input type="number" id="platformFee" placeholder="e.g. 15" />
          </label>

          <label>
            Payment Fee (%)
            <input type="number" id="paymentFee" placeholder="e.g. 2.9" />
          </label>

          <label>
            Shipping Cost
            <input type="number" id="shipping" placeholder="e.g. 5" />
          </label>

          <label>
            Target Net Margin (%)
            <input type="number" id="targetMargin" placeholder="e.g. 20" />
          </label>
        </div>

        <!-- Results -->
        <div class="calc_results">
          <div class="result_item">
            <span class="result_label">Max Ad Cost per Order</span>
            <strong id="maxAdCost">$0.00</strong>
          </div>

          <div class="result_sub">
            <p id="resultDesc">
              Enter values to see how much you can spend on ads per order.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- How it works -->
    <section class="calc_content">
      <h2>How it works</h2>
      <p>
        This calculator starts with your selling price and subtracts all
        non-ad costs such as product cost, platform fees, payment fees,
        and shipping.
      </p>
      <p>
        Your target net margin is then reserved as profit.
        Whatever amount remains is the maximum ad cost you can afford per order.
      </p>

      <h3>Formula</h3>
      <pre>
Target Profit = Price × Target Margin

Max Ad Cost per Order =
Price
− Product Cost
− Platform Fee
− Payment Fee
− Shipping
− Target Profit
      </pre>

      <h3>Example</h3>
      <p>
        If you sell a product for $50 with a product cost of $15,
        platform fee of 15%, payment fee of 2.9%, shipping cost of $5,
        and a target net margin of 20%,
        your maximum ad cost per order is $11.05.
      </p>
    </section>

    <!-- FAQ -->
    <section class="calc_faq">
      <h2>FAQ</h2>

      <h4>Is this the same as ROAS?</h4>
      <p>
        No. This calculator focuses on cost per order,
        not revenue ratios like ROAS.
      </p>

      <h4>Can I use this before running ads?</h4>
      <p>
        Yes. It is designed to help you plan ad budgets before launching campaigns.
      </p>

      <h4>Does this include taxes?</h4>
      <p>
        No. Taxes vary by region and are not included.
      </p>

      <h4>Which platforms does this work for?</h4>
      <p>
        Amazon, Shopify, Etsy, and any platform with percentage-based fees.
      </p>
    </section>
  </main>

  <!-- Script -->
  <script>
    const inputs = [
      "price",
      "cost",
      "platformFee",
      "paymentFee",
      "shipping",
      "targetMargin"
    ].map(id => document.getElementById(id));

    const output = document.getElementById("maxAdCost");
    const desc = document.getElementById("resultDesc");

    function calc() {
      const [
        price,
        cost,
        platformFee,
        paymentFee,
        shipping,
        targetMargin
      ] = inputs.map(i => parseFloat(i.value) || 0);

      const platformCost = price * (platformFee / 100);
      const paymentCost = price * (paymentFee / 100);
      const targetProfit = price * (targetMargin / 100);

      const maxAd =
        price -
        cost -
        platformCost -
        paymentCost -
        shipping -
        targetProfit;

      if (price <= 0) {
        output.textContent = "$0.00";
        desc.textContent =
          "Enter values to see how much you can spend on ads per order.";
        return;
      }

      output.textContent = `$${maxAd.toFixed(2)}`;
      desc.textContent =
        maxAd >= 0
          ? "This is the maximum ad spend per order you can afford."
          : "Your costs exceed your target margin.";
    }

    inputs.forEach(input => input.addEventListener("input", calc));
  </script>

  <!-- Styles -->
  <style>
    .calc_wrap {
      max-width: 1080px;
      margin: 0 auto;
      padding: 40px 16px 80px;
    }

    .calc_header {
      margin-bottom: 28px;
    }

    .calc_header h1 {
      font-size: 28px;
      font-weight: 900;
      letter-spacing: -0.02em;
    }

    .calc_header p {
      margin-top: 8px;
      color: var(--muted);
      max-width: 640px;
    }

    .calc_card {
      background: #fff;
      border-radius: 16px;
      box-shadow: 0 10px 30px rgba(0,0,0,.06);
      padding: 24px;
    }

    .calc_grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 24px;
    }

    .calc_inputs label {
      display: flex;
      flex-direction: column;
      gap: 6px;
      font-size: 13px;
      font-weight: 700;
      margin-bottom: 14px;
    }

    .calc_inputs input {
      padding: 10px 12px;
      border-radius: 12px;
      border: 1px solid rgba(2,6,23,.15);
      font-size: 14px;
    }

    .calc_results {
      background: rgba(248,250,252,.9);
      border-radius: 14px;
      padding: 20px;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }

    .result_item {
      font-size: 14px;
    }

    .result_label {
      display: block;
      color: var(--muted);
      margin-bottom: 6px;
    }

    .result_item strong {
      font-size: 28px;
      font-weight: 900;
    }

    .result_sub {
      margin-top: 10px;
      font-size: 12px;
      color: var(--muted);
    }

    .calc_content,
    .calc_faq {
      margin-top: 48px;
      max-width: 760px;
    }

    .calc_content h2,
    .calc_faq h2 {
      font-size: 22px;
      margin-bottom: 12px;
    }

    .calc_content h3 {
      margin-top: 24px;
    }

    .calc_content pre {
      background: rgba(248,250,252,.9);
      padding: 16px;
      border-radius: 12px;
      font-size: 13px;
      overflow-x: auto;
    }

    .calc_faq h4 {
      margin-top: 20px;
      font-size: 15px;
    }

    @media (max-width: 768px) {
      .calc_grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</BaseLayout>
