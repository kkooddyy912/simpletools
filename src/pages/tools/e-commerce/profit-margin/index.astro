---
import BaseLayout from "../../../../components/layout/BaseLayout.astro";
---

<BaseLayout
  title="Profit Margin Calculator — Free & Instant | SimpleTools"
  description="Free profit margin calculator for e-commerce sellers. Calculate net profit, margin, and understand real costs with clear formulas."
>
  <!-- ===================== -->
  <!-- Header / Intro -->
  <!-- ===================== -->
  <section class="calcHeader">
    <span class="badge">Free • No login • Instant</span>
    <h1>Profit Margin Calculator</h1>
    <p>
      A practical profit margin calculator for e-commerce sellers.
      Quickly estimate real net profit after product cost, platform fees,
      payment fees, shipping, and ads.
    </p>
  </section>

  <!-- ===================== -->
  <!-- Calculator Body -->
  <!-- ===================== -->
  <section class="calcBody">
    <div class="calcInputs">
      <div class="inputGroup">
        <label>Selling price (USD)</label>
        <input id="pm_price" type="number" step="0.01" />
      </div>
      <div class="inputGroup">
        <label>Product cost (COGS)</label>
        <input id="pm_cogs" type="number" step="0.01" />
      </div>
      <div class="inputGroup">
        <label>Platform fee (%)</label>
        <input id="pm_platform_fee" type="number" step="0.01" />
      </div>
      <div class="inputGroup">
        <label>Payment fee (%)</label>
        <input id="pm_payment_fee" type="number" step="0.01" />
      </div>
      <div class="inputGroup">
        <label>Shipping cost</label>
        <input id="pm_shipping" type="number" step="0.01" />
      </div>
      <div class="inputGroup">
        <label>Ad cost per order</label>
        <input id="pm_ads" type="number" step="0.01" />
      </div>
    </div>

    <div class="calcResults">
      <div class="resultCard">
        <div class="resultItem">
          <span>Net Profit</span>
          <strong id="pm_net_profit">$0.00</strong>
        </div>
        <div class="resultItem">
          <span>Net Margin</span>
          <strong id="pm_net_margin">0%</strong>
        </div>
      </div>
    </div>
  </section>

  <!-- ===================== -->
  <!-- Value Content (CRITICAL) -->
  <!-- ===================== -->
  <section class="content">
    <h2>When should you use this calculator?</h2>
    <p>
      This calculator is useful when pricing a product, evaluating ad spend,
      or checking whether a product is profitable before launching campaigns.
      Many sellers underestimate fees and ads, which leads to negative margins.
    </p>

    <h2>Who is this calculator for?</h2>
    <p>
      Designed for Amazon, Shopify, Etsy, and DTC sellers who want a quick,
      transparent way to understand real profitability per order.
      No assumptions, no hidden formulas.
    </p>

    <h2>How it works</h2>
    <p>
      The calculator subtracts all variable costs from the selling price.
      Percentage-based fees are calculated from revenue,
      while shipping and advertising are treated as fixed costs per order.
    </p>

    <h2>Formula</h2>
    <pre>
Net profit =
Price
− Product cost
− (Platform fee % × Price)
− (Payment fee % × Price)
− Shipping
− Ads

Net margin (%) =
(Net profit ÷ Price) × 100
    </pre>

    <h2>Common mistakes sellers make</h2>
    <p>
      Many sellers only consider product cost and platform fees.
      Advertising cost per order is often ignored, leading to misleading profit expectations.
      This calculator helps surface the true cost structure.
    </p>

    <h2>About SimpleTools</h2>
    <p>
      SimpleTools builds free, no-login calculators for e-commerce sellers.
      Each tool is designed to be fast, transparent, and practical,
      focusing on real-world decision making rather than vanity metrics.
    </p>

    <h2>FAQ</h2>
    <p><strong>Does this include taxes?</strong><br />No. Taxes vary by region and are not included.</p>
    <p><strong>Is this calculator free?</strong><br />Yes. No login or payment is required.</p>
  </section>

  <!-- ===================== -->
  <!-- JS (unchanged) -->
  <!-- ===================== -->
  <script is:inline>
    (function () {
      const $ = (id) => document.getElementById(id);
      const inputs = ["pm_price","pm_cogs","pm_platform_fee","pm_payment_fee","pm_shipping","pm_ads"].map($);
      const profit = $("pm_net_profit");
      const margin = $("pm_net_margin");

      function n(v){ return Number(v)||0 }
      function calc(){
        const price=n(inputs[0].value);
        const net = price
          - n(inputs[1].value)
          - price*(n(inputs[2].value)/100)
          - price*(n(inputs[3].value)/100)
          - n(inputs[4].value)
          - n(inputs[5].value);
        profit.textContent = net.toLocaleString("en-US",{style:"currency",currency:"USD"});
        margin.textContent = price?((net/price)*100).toFixed(1)+"%":"0%";
      }
      inputs.forEach(i=>i.addEventListener("input",calc));
      calc();
    })();
  </script>
</BaseLayout>
