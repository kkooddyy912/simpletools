---
import BaseLayout from "../../../../components/layout/BaseLayout.astro";
import { site } from "../../../../config/site";
---

<BaseLayout
  title="Profit Margin Calculator — Free & Instant | SimpleTools"
  description="Calculate net profit and net margin after all costs. Free, instant, and no login."
  canonical={`${site.url}/tools/e-commerce/profit-margin/`}
>
  <article class="page">
    <div class="badge">Free • No login • Instant</div>
    <h1>Profit Margin Calculator</h1>
    <p class="lead">
      Calculate your real profit and margin after product cost, fees, shipping, and ads.
    </p>

    <!-- CALCULATOR -->
    <section class="calcWrap">
      <!-- LEFT: INPUTS -->
      <div class="inputs">
        <div class="field">
          <label>Selling price (USD)</label>
          <input id="price" type="number" step="0.01" />
        </div>

        <div class="field">
          <label>Product cost (COGS)</label>
          <input id="cost" type="number" step="0.01" />
        </div>

        <div class="field">
          <label>Platform fee (%)</label>
          <input id="platformFee" type="number" step="0.1" />
        </div>

        <div class="field">
          <label>Payment fee (%)</label>
          <input id="paymentFee" type="number" step="0.1" />
        </div>

        <div class="field">
          <label>Shipping cost</label>
          <input id="shipping" type="number" step="0.01" />
        </div>

        <div class="field">
          <label>Ad cost per order</label>
          <input id="ads" type="number" step="0.01" />
        </div>
      </div>

      <!-- RIGHT: RESULTS -->
<div class="results">
  <div class="resultCard">
    <div class="resultRow">
      <span class="label">Net Profit</span>
      <span class="value" id="netProfit">$0.00</span>
    </div>

    <div class="divider"></div>

    <div class="resultRow">
      <span class="label">Net Margin</span>
      <span class="value big" id="netMargin">0%</span>
    </div>
  </div>
</div>
    </section>

    <!-- INFO -->
    <section class="info">
      <h2>How it works</h2>
      <p>
        The calculator subtracts all variable costs from the selling price.
        Percentage-based fees are calculated from revenue, while shipping and ad costs
        are treated as fixed per order.
      </p>

      <h2>Formula</h2>
      <pre>
Net profit =
Price
− Product cost
− (Platform fee % × Price)
− (Payment fee % × Price)
− Shipping
− Ads

Net margin (%) =
(Net profit ÷ Price) × 100
      </pre>

      <h2>Example</h2>
      <p>
        Price $50, product cost $15, platform fee 15%, payment fee 2.9%,
        shipping $5, ads $10 → Net profit $11.05, margin 22.1%.
      </p>

      <h2>FAQ</h2>
      <h3>Does this include taxes?</h3>
      <p>No. Taxes vary by location and are excluded.</p>

      <h3>Which platforms can I use this for?</h3>
      <p>Amazon, Shopify, Etsy, or any platform with percentage fees.</p>

      <h3>Why is my margin lower than expected?</h3>
      <p>Fees and ads often take a larger share than expected.</p>
    </section>

    <div class="back">
      <a href="/tools/e-commerce/">← Back to E-commerce Tools</a>
    </div>
  </article>

  <!-- SCRIPT -->
  <script>
    const ids = [
      "price",
      "cost",
      "platformFee",
      "paymentFee",
      "shipping",
      "ads",
    ];

    ids.forEach((id) =>
      document.getElementById(id).addEventListener("input", calculate)
    );

    function v(id) {
      return Number(document.getElementById(id).value) || 0;
    }

    function calculate() {
      const price = v("price");
      if (price <= 0) {
        document.getElementById("netProfit").innerText = "$0.00";
        document.getElementById("netMargin").innerText = "0%";
        return;
      }

      const feeTotal =
        (v("platformFee") / 100) * price +
        (v("paymentFee") / 100) * price;

      const netProfit =
        price - v("cost") - feeTotal - v("shipping") - v("ads");

      const netMargin = (netProfit / price) * 100;

      document.getElementById("netProfit").innerText =
        `$${netProfit.toFixed(2)}`;
      document.getElementById("netMargin").innerText =
        `${netMargin.toFixed(1)}%`;
    }
  </script>

  <style>
.page { max-width: 1000px; }

.lead { font-size: 14px; color: var(--muted); }

/* 1행: 좌 입력 / 우 결과 */
.calcWrap {
  display: grid;
  grid-template-columns: 1.2fr 0.8fr;
  gap: 16px;
  margin: 20px 0;
}

@media (max-width: 900px) {
  .calcWrap { grid-template-columns: 1fr; }
}

/* 입력/결과 카드 공통 */
.inputs, .results {
  padding: 16px;
  border-radius: 18px;
  border: 1px solid rgba(2,6,23,.10);
  background: rgba(255,255,255,.75);
}

/* 입력 영역 */
.field { margin-bottom: 10px; }

label { 
  display: block;
  font-size: 12px; 
  font-weight: 900; 
  margin-bottom: 6px;
}

input {
  width: 100%;
  padding: 10px 12px;
  border-radius: 12px;
  border: 1px solid rgba(2,6,23,.15);
  background: #fff;
  outline: none;
}

input:focus {
  border-color: rgba(37,99,235,.45);
  box-shadow: 0 0 0 4px rgba(37,99,235,.12);
}

/* ✅ 결과 영역 리디자인 */
.results {
  padding: 20px;
  border-radius: 18px;
  border: 1px solid rgba(2,6,23,.08);
  background: linear-gradient(
    180deg,
    rgba(255,255,255,.90),
    rgba(255,255,255,.72)
  );
}

.resultCard {
  display: flex;
  flex-direction: column;
  gap: 14px;
  height: 100%;
}

/* 라벨 왼쪽 / 값 가운데 */
.resultRow {
  display: grid;
  grid-template-columns: 1fr;
  gap: 8px;
}

.rLabel {
  font-size: 13px;
  font-weight: 800;
  color: var(--muted);
  text-align: left;
}

.rValue {
  font-size: 36px;
  font-weight: 900;
  letter-spacing: -0.02em;
  text-align: center;
}

.rValue.big {
  font-size: 44px;
}

.divider {
  height: 1px;
  background: rgba(2,6,23,.08);
  margin: 6px 0;
}

/* 2행 설명 */
.info { margin-top: 28px; }

.info h2 {
  margin-top: 20px;
  font-size: 20px;
  letter-spacing: -0.02em;
}

.info h3 {
  margin-top: 12px;
  font-size: 14px;
}

.info p, .info li {
  font-size: 14px;
  color: var(--muted);
}

pre {
  background: #0f172a;
  color: #fff;
  padding: 12px;
  border-radius: 12px;
  font-size: 12px;
  overflow-x: auto;
}

  </style>
</BaseLayout>
